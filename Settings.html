<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0" />
    <title>Settings - Personal Project</title>
    <meta name="description" content="Application settings and preferences" />
    <meta name="author" content="Exponential" />
    <link rel="icon" href="public/favicon.ico" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
      body { background: #ffffff; }
      .fixed-header { position: fixed; top: 0; left: 0; width: 100%; z-index: 40; }
      .main-content { margin-top: 96px; min-height: calc(100vh - 96px); }
      .toggle-switch { position: relative; display: inline-block; width: 60px; height: 34px; }
      .toggle-switch input { opacity: 0; width: 0; height: 0; }
      .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
      .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
      input:checked + .slider { background-color: #2196F3; }
      input:checked + .slider:before { transform: translateX(26px); }
      /* --- DARK MODE CSS START --- */
      body.dark, body.dark * {
        background-color: #18191a !important;
        color: #fff !important;
        border-color: #333 !important;
      }
      body.dark .bg-white,
      body.dark .bg-gray-100,
      body.dark .bg-gray-50,
      body.dark .main-content,
      body.dark .main-content-scroll,
      body.dark .fixed-sidebar,
      body.dark .single-bg-panel,
      body.dark .rounded-xl,
      body.dark .shadow-lg,
      body.dark .border,
      body.dark .p-6,
      body.dark .p-4,
      body.dark .p-3,
      body.dark .p-8,
      body.dark .w-80,
      body.dark .min-h-screen,
      body.dark .footer,
      body.dark .header,
      body.dark aside,
      body.dark main,
      body.dark .card,
      body.dark .tab-content-single-bg > div,
      body.dark .tab-content-single-bg > div.bg-white,
      body.dark .sidebar,
      body.dark .left-panel,
      body.dark .right-panel {
        background: #23272b !important;
        color: #fff !important;
        border-color: #333 !important;
      }
      body.dark .rounded-xl,
      body.dark .shadow-lg,
      body.dark .single-bg-panel,
      body.dark .card,
      body.dark .tab-content-single-bg > div,
      body.dark .tab-content-single-bg > div.bg-white {
        background: #23272b !important;
        color: #fff !important;
        border-color: #333 !important;
      }
      body.dark .text-gray-700,
      body.dark .text-gray-800,
      body.dark .text-gray-600,
      body.dark .text-blue-600,
      body.dark .text-blue-700,
      body.dark .text-blue-800,
      body.dark .text-black,
      body.dark .text-gray-500,
      body.dark .font-bold,
      body.dark .font-semibold {
        color: #fff !important;
      }
      body.dark i,
      body.dark .material-icons,
      body.dark .ph {
        color: #fff !important;
        fill: #fff !important;
      }
      body.dark input,
      body.dark textarea,
      body.dark select,
      body.dark .border-gray-300,
      body.dark .border-gray-200 {
        background: #23272b !important;
        color: #fff !important;
        border-color: #444 !important;
      }
      body.dark .bg-blue-600,
      body.dark .hover\:bg-blue-700:hover,
      body.dark .bg-green-600,
      body.dark .hover\:bg-green-700:hover,
      body.dark .bg-orange-600,
      body.dark .hover\:bg-orange-700:hover,
      body.dark .bg-red-600,
      body.dark .hover\:bg-red-700:hover {
        background: #2563eb !important;
        color: #fff !important;
      }
      body.dark .shadow,
      body.dark .shadow-lg {
        box-shadow: none !important;
      }
      body.dark a,
      body.dark .hover\:text-blue-600:hover {
        color: #90cdf4 !important;
      }
      body.dark .border,
      body.dark .border-gray-200,
      body.dark .border-gray-300 {
        border-color: #333 !important;
      }
      /* Keep logo background white in all modes */
      .logo-container {
        background-color: white !important;
      }
      body.dark .logo-container {
        background-color: white !important;
      }
      /* --- DARK MODE CSS END --- */
      .fixed-sidebar { position: fixed; top: 0; left: 0; height: 100vh; z-index: 30; }
      .w-16 {
        /* width: 4rem; */
      }
      .h-16 {
        height: 3rem;
      }
    </style>
  </head>
  <body class="bg-white font-sans">
    <div class="min-h-screen">
      <!-- Top Navigation -->
      <header class="fixed-header bg-white shadow p-2 flex items-center justify-between">
        <div class="flex items-center gap-2 ml-4">
          <a href="https://rohitashk.github.io/myproject/index.html">
            <div class="h-16 flex items-center justify-center bg-white logo-container">
              <img src="public/logo.png" alt="Logo" class="object-contain" style="width:12rem;max-height:3rem;" />
            </div>
          </a>
        </div>
        <nav class="flex items-center gap-8">
          <a href="index.html" class="flex items-center gap-1 text-gray-700 hover:text-blue-600"><i class="ph ph-house"></i> Home</a>
          <a href="Dashboard.html" class="flex items-center gap-1 text-gray-700 hover:text-blue-600"><i class="ph ph-layout"></i> Dashboard</a>
          <a href="Projects.html" class="flex items-center gap-1 text-gray-700 hover:text-blue-600"><i class="ph ph-book-open"></i> Projects</a>
          <a href="Reports.html" class="flex items-center gap-1 text-gray-700 hover:text-blue-600"><i class="ph ph-trend-up"></i> Reports</a>
          <a href="Help.html" class="flex items-center gap-1 text-gray-700 hover:text-blue-600"><i class="ph ph-question"></i> Help</a>
          <div class="relative inline-block align-middle">
            <button id="apps-menu-btn" class="flex items-center gap-1 text-gray-700 hover:text-blue-600 focus:outline-none px-2 py-1 rounded relative z-20">
              <i class="ph ph-grid-four"></i> Apps
              <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
              </svg>
            </button>
            <div id="apps-menu-dropdown" class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded shadow-lg opacity-0 pointer-events-none transition-opacity z-10">
              <a href="https://expo.dev" class="block px-4 py-2 hover:bg-gray-100">Expo</a>
              <a href="https://chat.openai.com" class="block px-4 py-2 hover:bg-gray-100">ChatGPT</a>
              <a href="https://claude.ai" class="block px-4 py-2 hover:bg-gray-100">Claude</a>
              <a href="https://gemini.google.com" class="block px-4 py-2 hover:bg-gray-100">Gemini</a>
              <a href="https://copilot.microsoft.com" class="block px-4 py-2 hover:bg-gray-100">Copilot</a>
              <a href="https://www.midjourney.com" class="block px-4 py-2 hover:bg-gray-100">Midjourney</a>
              <a href="https://openai.com/dall-e-2" class="block px-4 py-2 hover:bg-gray-100">DALL-E</a>
              <a href="https://stability.ai" class="block px-4 py-2 hover:bg-gray-100">Stable Diffusion</a>
            </div>
          </div>
          <div class="flex items-center gap-2 ml-4 mr-4">
            <img src="public/profile.png" alt="Profile" class="w-8 h-8 rounded-full cursor-pointer hover:opacity-80 transition-opacity border-2 border-gray-200 ring-2 ring-blue-500" onclick="window.location.href='Settings.html'" title="Settings" />
          </div>
        </nav>
      </header>

      <main class="main-content p-8 pb-32">
        <div class="max-w-4xl mx-auto">
          <!-- Page Header -->
          <div class="mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2 flex items-center gap-3">
              <i class="ph ph-gear text-blue-600"></i>
              User Settings
            </h1>
            <p class="text-gray-600 text-lg">Configure your application preferences and account settings</p>
          </div>

          <!-- Settings Sections -->
          <div class="space-y-8">
            
            <!-- Profile Settings -->
            <div class="bg-gray-100 rounded-xl shadow-lg border border-gray-200 p-6">
              <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                <i class="ph ph-user text-blue-600"></i>
                Profile Settings
              </h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Profile Picture</label>
                  <div class="flex items-center gap-4">
                    <img id="profile-photo-preview" src="public/profile.png" alt="Profile" class="w-16 h-16 rounded-full border-2 border-gray-200 ring-2 ring-blue-500" />
                    <input type="file" id="profile-photo-input" accept="image/*" class="hidden" />
                    <button type="button" id="change-photo-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                      Change Photo
                    </button>
                  </div>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Display Name</label>
                  <input type="text" id="user-name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                  <input type="email" id="user-email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Job Title</label>
                  <input type="text" id="user-designation" value="AI Engineer" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                </div>
              </div>
            </div>

            <!-- Notification Settings -->
            <div class="bg-gray-100 rounded-xl shadow-lg border border-gray-200 p-6">
              <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                <i class="ph ph-bell text-blue-600"></i>
                Notification Settings
              </h2>
              <div class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                  <div>
                    <h3 class="font-medium text-gray-800">Email Notifications</h3>
                    <p class="text-sm text-gray-600">Receive updates via email</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" checked>
                    <span class="slider"></span>
                  </label>
                </div>
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                  <div>
                    <h3 class="font-medium text-gray-800">Push Notifications</h3>
                    <p class="text-sm text-gray-600">Receive browser notifications</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" checked>
                    <span class="slider"></span>
                  </label>
                </div>
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                  <div>
                    <h3 class="font-medium text-gray-800">Weekly Reports</h3>
                    <p class="text-sm text-gray-600">Get weekly summary emails</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox">
                    <span class="slider"></span>
                  </label>
                </div>
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                  <div>
                    <h3 class="font-medium text-gray-800">Project Updates</h3>
                    <p class="text-sm text-gray-600">Notifications for project changes</p>
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" checked>
                    <span class="slider"></span>
                  </label>
                </div>
              </div>
            </div>

            <!-- Appearance Settings -->
            <div class="bg-gray-100 rounded-xl shadow-lg border border-gray-200 p-6">
              <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                <i class="ph ph-palette text-blue-600"></i>
                Appearance
              </h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Theme</label>
                  <select id="theme-select" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Language</label>
                  <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option>English</option>
                    <option>Spanish</option>
                    <option>French</option>
                    <option>German</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Time Zone</label>
                  <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option>UTC-5 (Eastern Time)</option>
                    <option>UTC-8 (Pacific Time)</option>
                    <option>UTC+0 (GMT)</option>
                    <option>UTC+1 (Central European Time)</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Date Format</label>
                  <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option>MM/DD/YYYY</option>
                    <option>DD/MM/YYYY</option>
                    <option>YYYY-MM-DD</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Save Button -->
            <div class="flex justify-end gap-4">
              <button class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors" id="reset-settings-btn">
                Reset
              </button>
              <button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors" id="save-settings-btn">
                Save Changes
              </button>
            </div>
          </div>
        </div>
      </main>

      <footer class="bg-white text-center p-4 shadow fixed bottom-0 left-0 w-full z-30">
        &copy; 2025 Personal Project. All rights reserved.
      </footer>
      
      <!-- Chat Bot Placeholder -->
      <div id="chatbot-root"></div>
      <script src="chatbot.js"></script>
    </div>

    <script>
      // Handle toggle switches
      document.querySelectorAll('.toggle-switch input').forEach(toggle => {
        toggle.addEventListener('change', function() {
          const slider = this.nextElementSibling;
          if (this.checked) {
            slider.style.backgroundColor = '#2196F3';
          } else {
            slider.style.backgroundColor = '#ccc';
          }
        });
      });

      // Use localStorage for persistence across full reloads and browser restarts
      function getDefaultUserSettings() {
        return {
          name: "Rohitash Kumar",
          email: "rohitash.kumar@vdx.tv",
          designation: "AI Engineer",
          photo: "public/profile.png",
          theme: "light"
        };
      }
      let userSettings = JSON.parse(localStorage.getItem('userSettings') || 'null') || getDefaultUserSettings();

      // Store selected image file data temporarily
      let tempPhotoData = null;

      // Populate settings fields when opening settings
      function populateSettingsForm() {
        document.getElementById('user-name').value = userSettings.name;
        document.getElementById('user-email').value = userSettings.email;
        document.getElementById('user-designation').value = userSettings.designation;
        document.getElementById('profile-photo-preview').src = userSettings.photo;
        document.getElementById('theme-select').value = userSettings.theme || 'light';
      }

      // Handle photo selection (do not update preview yet)
      const photoInput = document.getElementById('profile-photo-input');
      document.getElementById('change-photo-btn').addEventListener('click', function() {
        photoInput.click();
      });
      photoInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(evt) {
            tempPhotoData = evt.target.result;
            // Instantly update the preview image
            document.getElementById('profile-photo-preview').src = tempPhotoData;
          };
          reader.readAsDataURL(file);
        }
      });

      // Handle save button
      const saveBtn = document.getElementById('save-settings-btn');
      saveBtn.addEventListener('click', function() {
        userSettings.name = document.getElementById('user-name').value;
        userSettings.email = document.getElementById('user-email').value;
        userSettings.designation = document.getElementById('user-designation').value;
        userSettings.theme = document.getElementById('theme-select').value;
        // Only update photo if a new one was selected
        if (tempPhotoData) {
          userSettings.photo = tempPhotoData;
          tempPhotoData = null;
        }
        // Update preview and header photo after save
        document.getElementById('profile-photo-preview').src = userSettings.photo;
        const headerImg = document.querySelector('header img[alt="Profile"]');
        if (headerImg) headerImg.src = userSettings.photo;
        // Apply theme only after save
        if (userSettings.theme === 'dark') {
          document.body.classList.add('dark');
        } else {
          document.body.classList.remove('dark');
        }
        localStorage.setItem('userSettings', JSON.stringify(userSettings));
        alert('Settings saved!');
      });

      // Add Reset button logic
      const resetBtn = document.getElementById('reset-settings-btn');
      resetBtn.addEventListener('click', function() {
        userSettings = getDefaultUserSettings();
        // Save to localStorage so all pages reflect default
        localStorage.setItem('userSettings', JSON.stringify(userSettings));
        // Update all fields to default
        populateSettingsForm();
        // Update header photo
        const headerImg = document.querySelector('header img[alt="Profile"]');
        if (headerImg) headerImg.src = userSettings.photo;
        // Apply theme
        if (userSettings.theme === 'dark') {
          document.body.classList.add('dark');
        } else {
          document.body.classList.remove('dark');
        }
        alert('Settings have been reset to default!');
      });

      // On page load, populate form and do NOT apply theme until save
      populateSettingsForm();

      // On every page load, apply user settings from localStorage if available
      window.addEventListener('DOMContentLoaded', function() {
        const settings = JSON.parse(localStorage.getItem('userSettings') || 'null');
        if (settings) {
          // Update header photo
          const headerImg = document.querySelector('header img[alt="Profile"]');
          if (headerImg) headerImg.src = settings.photo;
          // Apply theme
          if (settings.theme === 'dark') {
            document.body.classList.add('dark');
          } else {
            document.body.classList.remove('dark');
          }
        }
      });

      // Highlight active header menu item
      (function() {
        var path = window.location.pathname.split('/').pop();
        if (!path) path = 'index.html';
        document.querySelectorAll('header nav a').forEach(function(link) {
          var icon = link.querySelector('i');
          if (link.getAttribute('href') === path) {
            link.classList.remove('text-gray-700');
            link.classList.add('text-blue-600', 'font-bold');
            if (icon) {
              icon.classList.remove('text-gray-700');
              icon.classList.add('text-blue-600', 'font-bold');
            }
          } else {
            link.classList.remove('text-blue-600', 'font-bold');
            link.classList.add('text-gray-700');
            if (icon) {
              icon.classList.remove('text-blue-600', 'font-bold');
              icon.classList.add('text-gray-700');
            }
          }
        });
      })();

      document.addEventListener('DOMContentLoaded', function() {
        const appsBtn = document.getElementById('apps-menu-btn');
        const appsDropdown = document.getElementById('apps-menu-dropdown');
        let dropdownTimeout;
        if (appsBtn && appsDropdown) {
          function showDropdown() {
            clearTimeout(dropdownTimeout);
            appsDropdown.classList.remove('opacity-0', 'pointer-events-none');
            appsDropdown.classList.add('opacity-100');
          }
          function hideDropdown() {
            clearTimeout(dropdownTimeout);
            dropdownTimeout = setTimeout(() => {
              appsDropdown.classList.add('opacity-0', 'pointer-events-none');
              appsDropdown.classList.remove('opacity-100');
            }, 250); // Slightly longer delay for user experience
          }
          appsBtn.addEventListener('mouseenter', showDropdown);
          appsBtn.addEventListener('mouseleave', hideDropdown);
          appsDropdown.addEventListener('mouseenter', showDropdown);
          appsDropdown.addEventListener('mouseleave', hideDropdown);
        }
      });
    </script>
    <script>
    // Global dark mode JS for all pages
    (function() {
      const settings = JSON.parse(localStorage.getItem('userSettings') || 'null');
      if (settings && settings.theme === 'dark') {
        document.body.classList.add('dark');
      } else {
        document.body.classList.remove('dark');
      }
    })();
    </script>
  </body>
</html> 